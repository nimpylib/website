
{{- $pathPrefix := "examples" }}

{{- if gt ( len .Params ) 1 }}
    {{- $.Scratch.Set "format" ( .Get 1 ) }}
{{- else }}
    {{- $splits := ( split ( .Get 0 ) "." ) }}
    {{- $splitsLength := ( len $splits ) }}
    {{- $format := ( index $splits ( sub $splitsLength 1 ) ) }}
    {{- $.Scratch.Set "format" $format }}
{{- end }}

{{- $file := ( .Get 0 ) }}
{{- $format := ( $.Scratch.Get "format" ) }}

{{- $siteCfg := index $.Site.Params.codeRepo 0 }}
{{/* `$.Site.Params.codeRepo` is a 1-length slice */}}

{{- print "```" $format "\n" ( 
    partial "remote/url/raw" (
        merge
          $siteCfg
          (dict "path" (printf "%s/%s" $pathPrefix $file))
    ) | partial "remote/getRemoteContent"
) "\n" "```" | markdownify }}
